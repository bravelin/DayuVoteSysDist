(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-044a69b7"],{"0e50":function(t,e,a){"use strict";var n=a("694c"),i=a.n(n);i.a},"539d":function(t,e,a){var n=a("b2f5"),i=a("f01a"),c=a("b6f1"),s=a("c9ea"),o="["+s+"]",r="​",m=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(t,e,a){var i={},o=c(function(){return!!s[t]()||r[t]()!=r}),m=i[t]=o?e(l):s[t];a&&(i[a]=m),n(n.P+n.F*o,"String",i)},l=d.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(m,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},"694c":function(t,e,a){},"7c66":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page advise-page"},[a("div",{staticClass:"wrap"},[0==t.actTime.type?a("div",{staticClass:"act-time"},[t._v("活动时间："+t._s(t.actTime.time))]):t._e(),1==t.actTime.type?a("div",{staticClass:"act-time"},[t._v("报名时间："+t._s(t.actTime.time1))]):t._e(),1==t.actTime.type?a("div",{staticClass:"act-time"},[t._v("投票时间："+t._s(t.actTime.time2))]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:4==t.actStatus&&5==t.actStatus,expression:"actStatus==4 && actStatus==5"}],staticClass:"act-status"},[t._v("抱歉,"+t._s("4"==t.actStatus?"活动已结束!":"5"==t.actStatus?"活动已关闭!":"活动未进行!"))])]),a("wv-group",{staticClass:"form-group",class:{disabled:!t.actTime.canSign||!t.canSign||t.actClosed}},[a("wv-input",{attrs:{readonly:!t.actTime.canSign||!t.canSign||t.actClosed,label:"您的称呼：",placeholder:"请输入您的称呼",labelWidth:75,maxlength:50,required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),a("wv-input",{attrs:{readonly:!t.actTime.canSign||!t.canSign||t.actClosed,label:"联系电话：",placeholder:"请输入联系电话",labelWidth:75,maxlength:20},model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}}),a("wv-textarea",{staticClass:"content",attrs:{disabled:!t.actTime.canSign||!t.canSign||t.actClosed,placeholder:"请输入投诉内容",rows:3,"max-length":500,"show-counter":!0,required:""},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("div",{staticClass:"wrap"},[a("wv-button",{attrs:{disabled:!t.actTime.canSign||!t.canSign||t.actClosed,type:"primary"},on:{click:function(e){return t.doCommit()}}},[t._v("提交")])],1)],1)},i=[],c=(a("e836"),a("7364"),a("f1ed")),s=a("46f1"),o=a("9dfe"),r={name:"Advise",computed:{winHeight:function(){return this.$store.state.winHeight},actStatus:function(){return this.$store.state.act.status},actClosed:function(){return"5"==this.$store.state.act.status},actTime:function(){var t=this.$store.state.act,e="yyyy-MM-dd hh:mm",a=Object(c["b"])(t.signUpStartTime,e),n=Object(c["b"])(t.signUpEndTime,e),i=Object(c["b"])(t.voteStartTime,e),s=Object(c["b"])(t.voteEndTime,e),o=new Date,r=o.getTime()>t.signUpStartTime.getTime();return i==a&&s==n?{type:0,time:i+" ~ "+s,canSign:r}:{type:1,time1:a+" ~ "+n,time2:i+" ~ "+s,canSign:r}}},data:function(){return{form:{name:"",tel:"",content:""},canSign:!0}},created:function(){var t=this,e=t.$store.state;t.$store.commit("switchLoading",!1),Object(c["e"])()?t.$ajax({url:s["a"].isComplainted,method:"post",params:{verifyType:"client"},data:{actId:e.act.id,userId:e.userId}}).then(function(e){200==e.code&&(t.canSign=e.data,t.canSign||Object(o["Toast"])({message:e.message,type:"text",duration:3e3}))}):(t.canSign=!1,Object(o["Toast"])({message:"请在微信中打开链接进行投诉!",type:"text",duration:3e3})),setTimeout(function(){t.$emit("share",{name:"global"})},1e3)},methods:{doCommit:function(){var t=this;if(t.canSign&&t.actTime.canSign&&t.doCheck()){t.$store.commit("switchLoading",!0);var e=t.form,a=t.$store.state,n={actId:a.act.id,userId:a.userId,name:e.name,tel:e.tel,content:e.content};t.$ajax({url:s["a"].commitComplaint,method:"POST",params:{verifyType:"client"},data:n}).then(function(e){200==e.code?(Object(o["Toast"])({message:"提交成功!感谢您的反馈!",type:"text",duration:1e3}),setTimeout(function(){t.$router.push({name:"home",query:{actId:a.act.id}})},500)):Object(o["Toast"])({message:e.message||"提交失败!",type:"text",duration:1e3}),t.$store.commit("switchLoading",!1)})}},doCheck:function(){var t=this,e=t.form,a=e.name.trim();if(!a)return Object(o["Toast"])({message:"请输入您的称呼!",type:"text",duration:1e3}),!1;e.name=a;var n=e.tel.trim();if(n&&!/^1[3456789]\d{9}$/.test(n))return Object(o["Toast"])({message:"请输入正确的手机号码!",type:"text",duration:1e3}),!1;e.tel=n;var i=e.content.trim();return i?(e.content=i,!0):(Object(o["Toast"])({message:"请输入投诉内容!",type:"text",duration:1e3}),!1)}}},m=r,u=(a("0e50"),a("6691")),d=Object(u["a"])(m,n,i,!1,null,null,null);e["default"]=d.exports},c9ea:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e836:function(t,e,a){"use strict";a("539d")("trim",function(t){return function(){return t(this,3)}})}}]);