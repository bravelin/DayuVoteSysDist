(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c77c057"],{"588a":function(t,e,a){},"789b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page rank-page"},[a("div",{staticClass:"wrap",staticStyle:{display:"none"}},[a("wv-grid",[a("wv-grid-item",{staticClass:"g1"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("参与选手")]),a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.playerCount))])]),a("wv-grid-item",{staticClass:"g2"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("累计票数")]),a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.voteCount))])]),a("wv-grid-item",{staticClass:"g3"},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("累计人气")]),a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.popularity))])])],1),0==t.actTime.type?a("div",{staticClass:"act-time"},[t._v("活动时间："+t._s(t.actTime.time))]):t._e(),1==t.actTime.type?a("div",{staticClass:"act-time"},[t._v("报名时间："+t._s(t.actTime.time1))]):t._e(),1==t.actTime.type?a("div",{staticClass:"act-time"},[t._v("投票时间："+t._s(t.actTime.time2))]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:4==t.actStatus&&5==t.actStatus,expression:"actStatus==4 && actStatus==5"}],staticClass:"act-status"},[t._v("抱歉,"+t._s("4"==t.actStatus?"活动已结束!":"5"==t.actStatus?"活动已关闭!":"活动未进行!"))])],1),a("div",{staticClass:"info-title",staticStyle:{margin:"10px 8px 12px"}},[t._v("最新排名")]),t._m(0),a("div",{staticClass:"info-content rank-list"},[t._l(t.currList,(function(e,s){return a("div",{key:e.id,staticClass:"rank-item",on:{click:function(a){return t.doDetail(e)}}},[a("label",[t._v(t._s(s+1))]),a("span",{style:{"background-image":"url("+e.logo+")"}}),a("div",[t._v(t._s(e.name))]),a("strong",[t._v(t._s(e.totalVotes))]),a("span",[t._v("票")])])})),t.isOver?t._e():a("div",{staticClass:"load-info",on:{click:function(e){return t.doLoadMore()}}},[t._v("加载更多...")]),t.isOver?a("div",{staticClass:"load-info"},[t._v("已加载全部")]):t._e()],2)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"rank-list-header"},[a("li",[t._v("排名")]),a("li",[t._v("选手")]),a("li",[t._v("票数")])])}],r=(a("2229"),a("cb63"),a("f1ed")),n=a("46f1"),c={name:"Rank",computed:{playerCount:function(){return this.$store.state.act.playerCount},voteCount:function(){return this.$store.state.act.voteCount},visitCount:function(){return this.$store.state.act.visitCount},popularity:function(){return parseInt(this.$store.state.act.popularity)},actStatus:function(){return this.$store.state.act.status},actTime:function(){var t=this.$store.state.act,e="yyyy-MM-dd hh:mm",a=Object(r["c"])(t.signUpStartTime,e),s=Object(r["c"])(t.signUpEndTime,e),i=Object(r["c"])(t.voteStartTime,e),n=Object(r["c"])(t.voteEndTime,e),c=new Date,l=c.getTime()>t.signUpStartTime.getTime()&&c.getTime()<t.signUpEndTime.getTime();return i==a&&n==s?{type:0,time:i+" ~ "+n,canSign:l}:{type:1,time1:a+" ~ "+s,time2:i+" ~ "+n,canSign:l}}},data:function(){return{players:[],currList:[],currPage:1,pageSize:15,isOver:!1}},created:function(){var t=this;t.getPlayers(),setTimeout((function(){t.$emit("share",{name:"global"})}),1e3),setTimeout((function(){t.$emit("checkstatus")}),2100)},methods:{getPlayers:function(t){var e=this,a=e.$store;e.$ajax({url:n["a"].getActPlayers+a.state.act.id,params:{pageSize:5e3,page:1,order:"totalVotes",orderDir:"DESC"}}).then((function(t){if(200==t.code){for(var a=t.data,s=[],i=0;i<=(a.dataList.length+"").length;i++)s.push("0");e.players=a.dataList.map((function(t){return t.no=Object(r["g"])(s.join(""),t.no),t.pictures&&(t.logo=JSON.parse(t.pictures)[0]),t}));for(var n=0;n<e.pageSize&&e.players.length;n++)e.currList.push(e.players[n]);e.isOver=e.pageSize>=e.players.length}e.$store.commit("switchLoading",!1)}))},doLoadMore:function(){var t=this;if(!t.isOver){for(var e=0,a=t.pageSize*t.currPage;a<t.players.length&&e<t.pageSize;a++)t.currList.push(t.players[a]),e+=1;t.currPage=t.currPage+1,t.isOver=e<t.pageSize}},doDetail:function(t){var e=this;e.$router.push({name:"detail",query:{actId:e.$store.state.act.id,pId:t.id}})}}},l=c,o=(a("efa4"),a("6691")),u=Object(o["a"])(l,s,i,!1,null,null,null);e["default"]=u.exports},efa4:function(t,e,a){"use strict";var s=a("588a"),i=a.n(s);i.a}}]);