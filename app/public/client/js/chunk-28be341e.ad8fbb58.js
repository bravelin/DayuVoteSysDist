(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28be341e"],{"23b4":function(t,a,e){},"789b":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page rank-page"},[e("div",{staticClass:"wrap",staticStyle:{display:"none"}},[e("wv-grid",[e("wv-grid-item",{staticClass:"g1"},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("参与选手")]),e("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.playerCount))])]),e("wv-grid-item",{staticClass:"g2"},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("累计票数")]),e("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.voteCount))])]),e("wv-grid-item",{staticClass:"g3"},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("累计人气")]),e("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.popularity))])])],1),0==t.actTime.type?e("div",{staticClass:"act-time"},[t._v("活动时间："+t._s(t.actTime.time))]):t._e(),1==t.actTime.type?e("div",{staticClass:"act-time"},[t._v("报名时间："+t._s(t.actTime.time1))]):t._e(),1==t.actTime.type?e("div",{staticClass:"act-time"},[t._v("投票时间："+t._s(t.actTime.time2))]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:4==t.actStatus&&5==t.actStatus,expression:"actStatus==4 && actStatus==5"}],staticClass:"act-status"},[t._v("抱歉,"+t._s("4"==t.actStatus?"活动已结束!":"5"==t.actStatus?"活动已关闭!":"活动未进行!"))])],1),e("div",{staticClass:"info-title",staticStyle:{margin:"10px 8px 12px"}},[t._v("最新排名")]),t._m(0),e("div",{staticClass:"info-content rank-list"},t._l(t.players,(function(a,s){return e("div",{key:a.id,staticClass:"rank-item",on:{click:function(e){return t.doDetail(a)}}},[e("label",[t._v(t._s(s+1))]),e("span",{style:{"background-image":"url("+a.logo+")"}}),e("div",[t._v(t._s(a.name))]),e("strong",[t._v(t._s(a.totalVotes))]),e("span",[t._v("票")])])})),0)])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"rank-list-header"},[e("li",[t._v("排名")]),e("li",[t._v("选手")]),e("li",[t._v("票数")])])}],n=(e("11ac"),e("cb63"),e("f1ed")),r=e("46f1"),l={name:"Rank",computed:{playerCount:function(){return this.$store.state.act.playerCount},voteCount:function(){return this.$store.state.act.voteCount},visitCount:function(){return this.$store.state.act.visitCount},popularity:function(){return parseInt(this.$store.state.act.popularity)},actStatus:function(){return this.$store.state.act.status},actTime:function(){var t=this.$store.state.act,a="yyyy-MM-dd hh:mm",e=Object(n["c"])(t.signUpStartTime,a),s=Object(n["c"])(t.signUpEndTime,a),i=Object(n["c"])(t.voteStartTime,a),r=Object(n["c"])(t.voteEndTime,a),l=new Date,c=l.getTime()>t.signUpStartTime.getTime()&&l.getTime()<t.signUpEndTime.getTime();return i==e&&r==s?{type:0,time:i+" ~ "+r,canSign:c}:{type:1,time1:e+" ~ "+s,time2:i+" ~ "+r,canSign:c}}},data:function(){return{players:[]}},created:function(){var t=this;t.getPlayers(),setTimeout((function(){t.$emit("share",{name:"global"})}),1e3)},methods:{getPlayers:function(t){var a=this,e=a.$store;a.$ajax({url:r["a"].getActPlayers+e.state.act.id,params:{pageSize:5e3,page:1,order:"totalVotes",orderDir:"DESC"}}).then((function(t){if(200==t.code){for(var e=t.data,s=[],i=0;i<=(e.dataList.length+"").length;i++)s.push("0");a.players=e.dataList.map((function(t){return t.no=Object(n["g"])(s.join(""),t.no),t.pictures&&(t.logo=JSON.parse(t.pictures)[0]),t}))}a.$store.commit("switchLoading",!1)}))},doDetail:function(t){var a=this;a.$router.push({name:"detail",query:{actId:a.$store.state.act.id,pId:t.id}})}}},c=l,o=(e("efa4"),e("6691")),u=Object(o["a"])(c,s,i,!1,null,null,null);a["default"]=u.exports},efa4:function(t,a,e){"use strict";var s=e("23b4"),i=e.n(s);i.a}}]);