(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-406067f1"],{"28c9f":function(e,t,i){"use strict";var a=i("af1f"),s=i.n(a);s.a},4752:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page detail-page"},[i("div",{staticClass:"page-content"},[i("div",{staticClass:"page-tools"},[i("h3",[e._v("投票活动详情")]),i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-tickets"},on:{click:function(t){return e.doViewPlayers()}}},[e._v("选手")]),e.miniPower?e._e():i("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-news"},on:{click:function(t){return e.doViewVotes()}}},[e._v("投票记录")]),i("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-back"},on:{click:function(t){return e.doBack()}}},[e._v("返回")])],1),i("div",{staticClass:"page-wrapper act-detail"},[i("div",{staticClass:"item"},[i("label",[e._v("活动标题：")]),i("span",[e._v(e._s(e.detail.title))])]),i("div",{staticClass:"item"},[i("label",[e._v("报名时间范围：")]),i("span",[e._v(e._s(e.detail.signUpTimeRange))])]),i("div",{staticClass:"item"},[i("label",[e._v("投票时间范围：")]),i("span",[e._v(e._s(e.detail.voteTimeRange))])]),i("div",{staticClass:"item"},[i("label",[e._v("每人最多投票数量：")]),i("span",[e._v(e._s(e.detail.maxTotalVoteNumber))])]),i("div",{staticClass:"item"},[i("label",[e._v("每人每天最多投票数量：")]),i("span",[e._v(e._s(e.detail.maxDayVoteNumber))])]),i("div",{staticClass:"item"},[i("label",[e._v("每人对一选手最多投票数量：")]),i("span",[e._v(e._s(e.detail.maxTotalVotePlayer))])]),i("div",{staticClass:"item"},[i("label",[e._v("打赏功能：")]),i("span",[e._v(e._s(e.detail.needDiamond))])]),i("div",{staticClass:"item"},[i("label",[e._v("报名是否需要审核：")]),i("span",[e._v(e._s(e.detail.needAudit))])]),i("div",{staticClass:"item"},[i("label",[e._v("幻灯片图片：")]),i("el-upload",{ref:"upload",staticClass:"disable-upload",attrs:{action:e.uploadAction,disabled:!0,"file-list":e.detail.pictures,"list-type":"picture-card","on-preview":e.handlePictureCardPreview}},[i("i",{staticClass:"el-icon-plus"})])],1),i("div",{staticClass:"item"},[i("label",[e._v("公告内容：")]),i("span",[e._v(e._s(e.detail.content))])]),i("div",{staticClass:"item"},[i("label",[e._v("投票内容介绍：")]),i("a",{on:{click:function(t){return e.doViewDescription()}}},[e._v("点击查看")])]),i("div",{staticClass:"item"},[i("label",[e._v("奖品设置：")]),i("a",{on:{click:function(t){return e.doViewPrizes()}}},[e._v("点击查看")])]),i("div",{staticClass:"item"},[i("label",[e._v("备注：")]),i("span",[e._v(e._s(e.detail.remark))])]),i("div",{staticClass:"item"},[i("label",[e._v("背景音乐：")]),i("span",[e._v(e._s(e.detail.backgroundMusic?e.detail.backgroundMusic:"[使用默认的背景音乐]"))])]),i("div",{staticClass:"item"},[i("label",[e._v("总票数：")]),i("span",[e._v(e._s(e.detail.voteCount))])]),i("div",{staticClass:"item"},[i("label",[e._v("金额：")]),i("span",[e._v(e._s(e.detail.moneyCount))])]),i("div",{staticClass:"item"},[i("label",[e._v("人气：")]),i("span",[e._v(e._s(e.detail.popularity))])]),i("div",{staticClass:"item"},[i("label",[e._v("活动浏览量：")]),i("span",[e._v(e._s(e.detail.visitCount))])]),i("div",{staticClass:"item"},[i("label",[e._v("报名人数：")]),i("span",[e._v(e._s(e.detail.playerCount))])]),i("div",{staticClass:"item"},[i("label",[e._v("活动创建时间：")]),i("span",[e._v(e._s(e.detail.createdAt))])]),i("div",{staticClass:"item"},[i("label",[e._v("状态：")]),i("span",[e._v(e._s(e.detail.status))])])])]),i("el-dialog",{attrs:{title:"投票内容介绍",visible:e.descriptionDialogVisible},on:{"update:visible":function(t){e.descriptionDialogVisible=t}}},[i("div",{staticClass:"description-dialog-preview",domProps:{innerHTML:e._s(e.detail.description)}})]),i("el-dialog",{attrs:{title:"奖品设置",visible:e.prizesDialogVisible},on:{"update:visible":function(t){e.prizesDialogVisible=t}}},[i("div",{staticClass:"description-dialog-preview",domProps:{innerHTML:e._s(e.detail.prizes)}})]),i("Preview",{attrs:{"is-show":e.showPreview,list:e.previewList,index:e.previewIndex},on:{"update:isShow":function(t){e.showPreview=t},"update:is-show":function(t){e.showPreview=t}}})],1)},s=[],n=(i("1007"),i("8cb7"),i("46f1")),l=i("e6c4"),o=i("f1ed"),r=i("cb63"),c={0:"已删除",1:"未开始",2:"正在报名",3:"正在投票",4:"已结束",5:"已关闭"},d={name:"ActivityDetail",components:{Preview:l["a"]},computed:{miniPower:function(){return this.$store.state.miniPower}},data:function(){return{actId:"",showPreview:!1,previewList:[],previewIndex:0,uploadAction:"/api/ue",descriptionDialogVisible:!1,prizesDialogVisible:!1,detail:{title:"",signUpTimeRange:"",voteTimeRange:"",maxTotalVoteNumber:"0",maxDayVoteNumber:"0",maxTotalVotePlayer:"1",needDiamond:"开通",needAudit:"否",description:"",prizes:"",content:"",remark:"",backgroundMusic:"",pictures:[],voteCount:0,popularity:0,visitCount:0,status:"",playerCount:0,moneyCount:0,createdAt:""}}},created:function(){var e=this;e.actId=e.$route.query.id,e.getActDetail(),e.$store.commit("switchActiveMenu","acts")},methods:{getActDetail:function(){var e=this;e.$ajax({url:n["a"].getActivity+e.actId}).then((function(t){if(e.$store.commit("switchLoading",!1),200==t.code){var i=t.data,a=e.detail;if(a.title=i.title,a.signUpTimeRange=Object(o["d"])(new Date(i.signUpStartTime))+" ~ "+Object(o["d"])(new Date(i.signUpEndTime)),a.voteTimeRange=Object(o["d"])(new Date(i.voteStartTime))+" ~ "+Object(o["d"])(new Date(i.voteEndTime)),a.maxTotalVoteNumber=i.maxTotalVoteNumber,a.maxDayVoteNumber=i.maxDayVoteNumber,a.maxTotalVotePlayer=i.maxTotalVotePlayer,a.needDiamond=i.needDiamond?"开通":"关闭",a.needAudit=i.needAudit?"是":"否",a.content=i.content,a.remark=i.remark,a.backgroundMusic=i.backgroundMusic?Object(r["b"])(i.backgroundMusic):"",a.description=Object(r["a"])(i.description),a.prizes=Object(r["a"])(i.prizes),a.voteCount=i.voteCount||0,a.popularity=parseInt(i.popularity||0),a.visitCount=i.visitCount||0,a.playerCount=i.playerCount||0,a.moneyCount=i.moneyCount||0,a.createdAt=Object(o["d"])(new Date(i.createdAt)),a.status=c[i.status],i.pictures){i.pictures=JSON.parse(i.pictures);var s=0,n=i.pictures.map((function(e){return s=e.lastIndexOf("/")+1,{name:e.substr(s),url:Object(r["b"])(e),realUrl:e}}));a.pictures=n,n.length>0&&e.getImageSize(0)}}else e.$router.back()}))},doViewDescription:function(){this.descriptionDialogVisible=!0},doViewPrizes:function(){this.prizesDialogVisible=!0},doViewPlayers:function(){this.$router.push({name:"players",query:{id:this.actId}})},doViewVotes:function(){this.$router.push({name:"votes",query:{aId:this.actId}})},getImageSize:function(e){var t=this,i=t.detail.pictures[e],a=new Image;a.onload=function(){t.previewList.push({src:i.url,w:this.width,h:this.height}),e<t.detail.pictures.length-1&&t.getImageSize(e+1)},a.src=i.url},handlePictureCardPreview:function(e){var t=this;t.previewIndex=0;for(var i=0;i<t.previewList.length;i++)if(t.previewList[i].src==e.url){t.previewIndex=i;break}t.showPreview=!0},doBack:function(){this.$router.back()}}},u=d,v=(i("28c9f"),i("623f")),p=Object(v["a"])(u,a,s,!1,null,null,null);t["default"]=p.exports},af1f:function(e,t,i){}}]);