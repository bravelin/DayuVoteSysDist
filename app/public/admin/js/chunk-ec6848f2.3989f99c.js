(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec6848f2"],{"10c2":function(e,t,o){"use strict";var r=["超级管理员","一级管理员","二级管理员"];t["a"]=r},"276a":function(e,t,o){"use strict";o("777a")("trim",(function(e){return function(){return e(this,3)}}))},"4ef5":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page"},[o("div",{staticClass:"page-content"},[o("div",{staticClass:"page-tools"},[o("h3",[e._v("我的账号")]),o("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(t){return e.doResetPassword()}}},[e._v("修改密码")])],1),o("div",{staticClass:"page-wrapper"},[o("el-card",[o("div",{staticClass:"item-text"},[o("span",[e._v("登录名称：")]),e._v(e._s(e.userName))]),o("div",{staticClass:"item-text"},[o("span",[e._v("真实名称：")]),e._v(e._s(e.userRealName))]),o("div",{staticClass:"item-text"},[o("span",[e._v("创建时间：")]),e._v(e._s(e.createdAt))]),o("div",{staticClass:"item-text"},[o("span",[e._v("账号级别：")]),e._v(e._s(e.role))]),o("div",{staticClass:"item-text"},[o("span",[e._v("最近登录时间：")]),e._v(e._s(e.lastLoginTime))])])],1)]),o("el-dialog",{attrs:{title:"修改密码",visible:e.dialogVisible,width:"450px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"旧密码：","label-width":"100px"}},[o("el-input",{ref:"oldPassword",attrs:{type:"password",autocomplete:"off",clearable:"",placeholder:"请输入账号的旧密码",maxlength:"50"},model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword",t)},expression:"form.oldPassword"}})],1),o("el-form-item",{attrs:{label:"新密码：","label-width":"100px"}},[o("el-input",{ref:"loginPassword",attrs:{type:"password",autocomplete:"off",clearable:"",placeholder:"请输入账号的新密码,至少6位数字和字母",maxlength:"50"},model:{value:e.form.loginPassword,callback:function(t){e.$set(e.form,"loginPassword",t)},expression:"form.loginPassword"}})],1),o("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"新密码确认：","label-width":"100px"}},[o("el-input",{ref:"repeatPassword",attrs:{type:"password",autocomplete:"off",clearable:"",placeholder:"请再次输入账号的新密码",maxlength:"50"},model:{value:e.form.repeatPassword,callback:function(t){e.$set(e.form,"repeatPassword",t)},expression:"form.repeatPassword"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){return e.doConfirm()}}},[e._v("确 定")])],1)],1)],1)},s=[],a=(o("4ca5"),o("77e6"),o("5ab2"),o("ff21"),o("cdbe"),o("6d57"),o("e10e"),o("9e76"),o("276a"),o("ac9f")),i=o("08c1"),n=o("46f1"),l=o("10c2"),c=o("f1ed");function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){Object(a["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var u={name:"Setting",data:function(){return{role:"",createdAt:"",lastLoginTime:"",dialogVisible:!1,form:{oldPassword:"",loginPassword:"",repeatPassword:""},dialogLoading:null}},computed:f({},Object(i["b"])(["userName","userRealName","userRole","userId"])),created:function(){var e=this;e.$store.commit("setRoutePath",[{label:"我的账号",name:"setting"}]),e.$store.commit("switchActiveMenu","setting"),e.$ajax({url:n["a"].getAccount+e.userId}).then((function(t){if(200==t.code){var o=t.data;e.role=l["a"][e.userRole],e.createdAt=Object(c["d"])(new Date(o.createdAt)),e.lastLoginTime=Object(c["d"])(new Date(o.lastLoginTime))}})),e.$store.commit("switchLoading",!1)},methods:{doResetPassword:function(){var e=this,t=e.form;t.oldPassword="",t.loginPassword="",t.repeatPassword="",e.dialogVisible=!0},doCheck:function(){var e=this,t=e.$refs,o=e.form,r=o.oldPassword.trim();if(!r)return e.$notify({type:"error",title:"提醒",message:"请输入账号的旧密码!"}),t.oldPassword.focus(),!1;o.oldPassword=r;var s=o.loginPassword.trim();if(!s)return e.$notify({type:"error",title:"提醒",message:"请输入账号的新密码!"}),t.loginPassword.focus(),!1;if(o.loginPassword=s,s.length<6)return e.$notify({type:"error",title:"提醒",message:"账号的密码请输入至少6位数字和字母!"}),t.loginPassword.focus(),!1;if(!s.match(/\d/)||!s.match(/[a-zA-Z]/))return e.$notify({type:"error",title:"提醒",message:"账号的密码需要包含数字和字母,太弱小心被攻击!"}),t.loginPassword.focus(),!1;var a=o.repeatPassword.trim();return a?(o.repeatPassword=a,a==s||(e.$notify({type:"error",title:"提醒",message:"两次输入的新密码不一致!请仔细检查一下!"}),!1)):(e.$notify({type:"error",title:"提醒",message:"请再次输入账号的新密码!"}),t.repeatPassword.focus(),!1)},doConfirm:function(){var e=this,t=e.form;e.doCheck()&&(e.dialogLoading=e.$loading({lock:!0,text:"正在处理,请稍候......",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"}),e.$ajax({url:n["a"].editPassword+e.userId,method:"POST",data:{oldPassword:Object(c["a"])(t.oldPassword),loginPassword:Object(c["a"])(t.loginPassword)}}).then((function(t){200==t.code?(e.$message({type:"success",message:"账号".concat(e.userRealName,"的密码修改成功!")}),e.dialogVisible=!1):e.$notify({type:"error",title:"提醒",message:t.message}),e.dialogLoading.close()})))}}},p=u,m=(o("571d"),o("623f")),g=Object(m["a"])(p,r,s,!1,null,"a84353be",null);t["default"]=g.exports},"571d":function(e,t,o){"use strict";var r=o("9461"),s=o.n(r);s.a},"777a":function(e,t,o){var r=o("e46b"),s=o("f6b4"),a=o("238a"),i=o("9769"),n="["+i+"]",l="​",c=RegExp("^"+n+n+"*"),d=RegExp(n+n+"*$"),f=function(e,t,o){var s={},n=a((function(){return!!i[e]()||l[e]()!=l})),c=s[e]=n?t(u):i[e];o&&(s[o]=c),r(r.P+r.F*n,"String",s)},u=f.trim=function(e,t){return e=String(s(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=f},9461:function(e,t,o){},9769:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);