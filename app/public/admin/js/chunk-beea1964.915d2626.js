(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-beea1964"],{"1bcc":function(t,e,a){},"35fc":function(t,e,a){"use strict";var n=a("1bcc"),r=a.n(n);r.a},"50a3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page vote-list-page"},[a("div",{staticClass:"page-content"},[a("div",{staticClass:"page-tools"},[a("h3",[t._v("投票记录")]),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh"},on:{click:function(e){return t.queryData()}}},[t._v("刷新")]),a("el-button",{attrs:{type:"warning",plain:"",icon:"el-icon-back"},on:{click:function(e){return t.doBack()}}},[t._v("返回")])],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.doSwitchTab},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"所有状态",name:"all"}}),a("el-tab-pane",{attrs:{label:"普通投票",name:"normal"}}),a("el-tab-pane",{attrs:{label:"后台投票",name:"back"}}),a("el-tab-pane",{attrs:{label:"钻石投票",name:"diamond"}})],1),a("div",{staticClass:"page-wrapper",style:{width:t.tableWidth+"px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.dataList,border:"",stripe:"","element-loading-text":"数据加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{label:"序号",width:"56",type:"index",align:"center",index:t.getIndex}}),a("el-table-column",{attrs:{prop:"voterNickName",width:"140",label:"投票人(IP)",align:"center"}}),a("el-table-column",{attrs:{prop:"actTitle","min-width":"120",label:"活动名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"title-link",attrs:{title:"点击查看活动详情"},on:{click:function(a){return t.doViewActDetail(e.row)}}},[t._v(t._s(e.row.actTitle))])]}}])}),a("el-table-column",{attrs:{prop:"playerName","min-width":"90",label:"选手名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"title-link",attrs:{title:"点击查看选手详情"},on:{click:function(a){return t.doViewPlayerDetail(e.row)}}},[t._v(t._s(e.row.playerName))])]}}])}),a("el-table-column",{attrs:{prop:"createdAt",width:"155",label:"投票时间",align:"center"}}),a("el-table-column",{attrs:{prop:"voteNum",width:"70",label:"票数",align:"center"}}),a("el-table-column",{attrs:{prop:"typeText",width:"96",label:"类型",align:"center"}}),a("el-table-column",{attrs:{prop:"diamondAmount",width:"110",label:"钻石金额(元)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("2"==e.row.type?e.row.diamondAmount:""))])]}}])})],1)],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}],attrs:{"current-page":t.currentPage,"page-sizes":[20,35,50],"page-size":t.currentPageSize,background:"",layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentPageChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)])},r=[],i=(a("34a3"),a("7364"),a("11ac"),a("46f1")),l=(a("cb63"),a("f1ed")),c={0:"普通投票",1:"后台投票",2:"钻石投票"},o={all:"all",normal:"0",back:"1",diamond:"2"},s={name:"VoteList",computed:{tableWidth:function(){var t=this.$store.state;return t.winWidth-(t.navState?280:104)},tableHeight:function(){return this.$store.state.winHeight-215}},data:function(){return{actId:"",playerId:"",dataList:[],loading:!0,currentPage:1,currentPageSize:20,total:0,activeTab:"all"}},created:function(){var t=this,e=t.$store;e.commit("switchActiveMenu","votes"),e.commit("setRoutePath",[{label:"投票记录",name:"votes"}]),e.commit("switchLoading",!1);var a=t.$route,n=a.query;t.actId=n.aId||"",t.playerId=n.pId||"",t.activeTab=n.s||"all",t.currentPage=parseInt(n.p||1),t.currentPageSize=parseInt(n.g||20),t.queryData()},methods:{queryData:function(){var t=this;t.loading=!0,t.$ajax({url:i["a"].getVotes,params:{actId:t.actId,playerId:t.playerId,pageSize:t.currentPageSize,page:t.currentPage,type:o[t.activeTab]}}).then(function(e){200==e.code&&(e.data?(t.total=e.data.total,t.dataList=e.data.dataList.map(function(t){return t.createdAt=Object(l["d"])(new Date(t.createdAt)),t.typeText=c[t.type],t.diamondAmount&&(t.diamondAmount=(t.diamondAmount/100).toFixed(2)),t})):(t.total=0,t.dataList=[]),t.refreshUrl(),setTimeout(function(){t.loading=!1},200))})},doViewActDetail:function(t){this.$router.push({name:"players",query:{id:t.actId}})},doViewPlayerDetail:function(t){this.$router.push({name:"players",query:{id:t.actId}})},doSwitchTab:function(){var t=this;t.currentPage=1,t.queryData()},handleSizeChange:function(t){this.currentPageSize=t,this.currentPage=1,this.queryData()},handleCurrentPageChange:function(t){this.currentPage=t,this.queryData()},getIndex:function(t){return(this.currentPage-1)*this.currentPageSize+t+1},doBack:function(){this.$router.back()},refreshUrl:function(){var t=this;"votes"==t.$route.name&&t.$router.replace({name:"votes",query:{aId:t.actId,pId:t.playerId,s:t.activeTab,p:t.currentPage,g:t.currentPageSize}})}}},u=s,d=(a("35fc"),a("6691")),p=Object(d["a"])(u,n,r,!1,null,null,null);e["default"]=p.exports}}]);