(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7080a51b"],{"04be":function(t,e,a){"use strict";var i=a("a67b"),s=a.n(i);s.a},"9aca9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page detail-page"},[a("div",{staticClass:"page-content"},[a("div",{staticClass:"page-tools"},[a("h3",[t._v("选手详情")]),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-edit"},on:{click:function(e){return t.doEdit()}}},[t._v("编辑")]),a("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-back"},on:{click:function(e){return t.doBack()}}},[t._v("返回")])],1),a("div",{staticClass:"page-wrapper player-detail"},[a("div",{staticClass:"item"},[a("label",[t._v("活动标题：")]),a("span",[t._v(t._s(t.act.title))])]),a("div",{staticClass:"item"},[a("label",[t._v("活动状态：")]),a("span",[t._v(t._s(t.act.statusText))])]),a("div",{staticClass:"item"},[a("label",[t._v("选手名称：")]),a("span",[t._v(t._s(t.detail.name))])]),a("div",{staticClass:"item"},[a("label",[t._v("选手编号：")]),a("span",[t._v(t._s(t.detail.no))])]),a("div",{staticClass:"item"},[a("label",[t._v("联系电话：")]),a("span",[t._v(t._s(t.detail.tel))])]),a("div",{staticClass:"item"},[a("label",[t._v("地址：")]),a("span",[t._v(t._s(t.detail.address))])]),a("div",{staticClass:"item"},[a("label",[t._v("总票数：")]),a("span",[t._v(t._s(t.detail.totalVotes))])]),a("div",{staticClass:"item"},[a("label",[t._v("钻石票：")]),a("span",[t._v(t._s(t.detail.diamondVotes))])]),a("div",{staticClass:"item"},[a("label",[t._v("礼金数：")]),a("span",[t._v(t._s(t.detail.cashGift))])]),a("div",{staticClass:"item"},[a("label",[t._v("选手介绍：")]),a("div",{staticClass:"introduce-wrap",domProps:{innerHTML:t._s(t.detail.introduce)}})]),a("div",{staticClass:"item"},[a("label",[t._v("选手图片：")]),a("el-upload",{ref:"upload",staticClass:"disable-upload",attrs:{action:t.uploadAction,disabled:!0,"file-list":t.detail.pictures,"list-type":"picture-card","on-preview":t.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})])],1),a("div",{staticClass:"item"},[a("label",[t._v("类型：")]),a("span",[t._v(t._s(t.detail.type))])]),a("div",{staticClass:"item"},[a("label",[t._v("选手状态：")]),a("span",[t._v(t._s(t.detail.status))])]),a("div",{staticClass:"item"},[a("label",[t._v("备注：")]),a("span",[t._v(t._s(t.detail.remark))])]),a("div",{staticClass:"item"},[a("label",[t._v("创建时间：")]),a("span",[t._v(t._s(t.detail.createdAt))])])])]),a("Preview",{attrs:{"is-show":t.showPreview,list:t.previewList,index:t.previewIndex},on:{"update:isShow":function(e){t.showPreview=e},"update:is-show":function(e){t.showPreview=e}}})],1)},s=[],l=(a("8c53"),a("11ac"),a("7364"),a("46f1")),r=a("e6c4"),n=a("f1ed"),c=a("cb63"),d={0:"已删除",1:"未审核",2:"正常",3:"已禁止投票",4:"未通过审核"},o={1:"微信报名",2:"后台添加"},u={0:"已删除",1:"未开始",2:"正在报名",3:"正在投票",4:"已结束",5:"已关闭"},v={name:"PlayerDetail",components:{Preview:r["a"]},data:function(){return{playerId:"",uploadAction:"/api/ue",showPreview:!1,previewList:[],previewIndex:0,act:{id:"",title:"",statusText:""},detail:{name:"",no:"",tel:"",totalVotes:0,diamondVotes:0,cashGift:0,introduce:"",type:"",status:"",remark:"",createdAt:"",address:""}}},created:function(){var t=this;t.$store.commit("switchActiveMenu","acts"),t.$store.commit("setRoutePath",[{label:"选手详情",name:"playerDEtail"}]),t.playerId=t.$route.query.id,t.getDetail()},methods:{getDetail:function(){var t=this,e=t.detail;t.$ajax({url:l["a"].getPlayer+t.playerId}).then(function(a){if(t.$store.commit("switchLoading",!1),200==a.code){var i=a.data;if(e.name=i.name,e.tel=i.tel,e.remark=i.remark,e.type=o[i.type],e.no=i.no,e.address=i.address,e.status=d[i.status],e.createdAt=Object(n["d"])(new Date(i.createdAt)),t.act.id=i.actId,e.introduce=Object(c["a"])(i.introduce),i.pictures){i.pictures=JSON.parse(i.pictures);var s=0,l=i.pictures.map(function(t){return s=t.lastIndexOf("/")+1,{name:t.substr(s),url:Object(c["b"])(t),realUrl:t}});e.pictures=l,l.length>0&&t.getImageSize(0)}t.queryAct()}else t.$router.back()})},queryAct:function(){var t=this;t.$ajax({url:l["a"].getActivity+t.act.id}).then(function(e){if(200==e.code){var a=e.data,i=t.act;i.title=a.title,i.statusText=u[a.status]}})},getImageSize:function(t){var e=this,a=e.detail.pictures[t],i=new Image;i.onload=function(){e.previewList.push({src:a.url,w:this.width,h:this.height}),t<e.detail.pictures.length-1&&e.getImageSize(t+1)},i.src=a.url},handlePictureCardPreview:function(t){var e=this;e.previewIndex=0;for(var a=0;a<e.previewList.length;a++)if(e.previewList[a].src==t.url){e.previewIndex=a;break}e.showPreview=!0},doEdit:function(){var t=this;t.$router.push({name:"editPlayer",query:{id:t.playerId}})},doBack:function(){this.$router.back()}}},p=v,_=(a("04be"),a("6691")),m=Object(_["a"])(p,i,s,!1,null,null,null);e["default"]=m.exports},a67b:function(t,e,a){}}]);