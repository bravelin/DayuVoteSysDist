(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a95a"],{bbae:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-content"},[a("div",{staticClass:"page-tools"},[a("h3",[e._v("日志记录")]),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh"},on:{click:function(t){return e.queryData()}}},[e._v("刷新")])],1),a("div",{staticClass:"page-wrapper",style:{width:e.tableWidth+"px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.dataList,border:"",stripe:"","element-loading-text":"数据加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{label:"序号",width:"70",type:"index",align:"center",index:e.getIndex}}),a("el-table-column",{attrs:{prop:"createdAt",width:"170",label:"时间",align:"center"}}),a("el-table-column",{attrs:{prop:"userName",width:"170",label:"账号",align:"center"}}),a("el-table-column",{attrs:{prop:"content",label:"内容",align:"center"}})],1)],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total,expression:"total"}],attrs:{"current-page":e.currentPage,"page-sizes":[20,35,50,100],"page-size":e.currentPageSize,background:"",layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])},r=[],i=(a("2229"),a("f1ed")),l=a("46f1"),o={name:"Logs",computed:{tableWidth:function(){var e=this.$store.state;return e.winWidth-(e.navState?280:104)}},data:function(){return{dataList:[],loading:!0,currentPage:1,currentPageSize:20,total:0}},created:function(){var e=this;e.$store.commit("setRoutePath",[{label:"系统日志",name:"logs"}]),e.$store.commit("switchLoading",!1),e.$store.commit("switchActiveMenu","logs"),this.queryData()},methods:{handleSizeChange:function(e){this.currentPageSize=e,this.currentPage=1,this.queryData()},handleCurrentPageChange:function(e){this.currentPage=e,this.queryData()},getIndex:function(e){return(this.currentPage-1)*this.currentPageSize+e+1},queryData:function(){var e=this;e.loading=!0,e.$ajax({url:l["a"].getLogs,params:{pageSize:e.currentPageSize,page:e.currentPage}}).then((function(t){200==t.code&&(e.total=t.data.total,e.dataList=t.data.dataList.map((function(e){return e.createdAt=Object(i["d"])(new Date(e.createdAt)),e})),setTimeout((function(){e.loading=!1}),200))}))}}},c=o,s=a("6691"),u=Object(s["a"])(c,n,r,!1,null,null,null);t["default"]=u.exports}}]);