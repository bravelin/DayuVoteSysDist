(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2132f8"],{ac33:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-content"},[a("div",{staticClass:"page-tools"},[a("h3",[e._v("绩效列表")]),a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-refresh"},on:{click:function(t){return e.queryData()}}},[e._v("刷新")])],1),a("div",{staticClass:"page-wrapper",style:{width:e.tableWidth+"px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",stripe:"","element-loading-text":"数据加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{label:"序号",width:"70",type:"index",align:"center"}}),a("el-table-column",{attrs:{prop:"loginName",label:"登录名",align:"center"}}),a("el-table-column",{attrs:{prop:"realName",label:"真实名称",align:"center"}}),a("el-table-column",{attrs:{prop:"role",label:"级别",align:"center"}}),a("el-table-column",{attrs:{prop:"todayScore",label:"今日绩效",align:"center"}}),a("el-table-column",{attrs:{prop:"thisWeekScore",label:"本周绩效",align:"center"}}),a("el-table-column",{attrs:{prop:"thisMonthScore",label:"本月绩效",align:"center"}}),0==e.userRole?a("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",type:"warning",size:"mini"},on:{click:function(a){return e.doViewSubScore(t.row)}}},[e._v("查看下级绩效")])]}}],null,!1,1824784819)}):e._e()],1)],1)])])},o=[],i=(a("e10e"),a("6d57"),a("ff21"),a("46f1")),r={name:"AccountsScore",computed:{tableWidth:function(){var e=this.$store.state;return e.winWidth-(e.navState?280:104)},userRole:function(){return this.$store.state.userRole}},data:function(){return{dataList:[],loading:!0}},created:function(){var e=this,t=e.$store;t.commit("setRoutePath",[{label:"账号管理",name:"accounts"},{label:"绩效列表",name:"accountsScore"}]),t.commit("switchLoading",!1),t.commit("switchActiveMenu","accounts"),e.queryData()},methods:{doViewSubScore:function(e){this.$router.push({name:"accountSubScore",query:{uid:e.id}})},queryData:function(){var e=this;e.loading=!0,e.$ajax({url:i["a"].getAccountStat,method:"post",data:{uid:this.$store.state.userId}}).then((function(t){if(200==t.code){var a={},n=t.data;n.res0&&n.res0.forEach((function(e){a[e.id]={loginName:e.loginName,id:e.id,realName:e.realName,role:2==e.role?"二级管理员":"一级管理员",todayScore:0,thisWeekScore:0,thisMonthScore:0}})),n.res1&&n.res1.forEach((function(e){a[e.uid]&&(a[e.uid].todayScore=(e.score/100).toFixed(2))})),n.res2&&n.res2.forEach((function(e){a[e.uid]&&(a[e.uid].thisWeekScore=(e.score/100).toFixed(2))})),n.res3&&n.res3.forEach((function(e){a[e.uid]&&(a[e.uid].thisMonthScore=(e.score/100).toFixed(2))}));var o=[];Object.keys(a).forEach((function(e){o.push(a[e])})),e.dataList=o}setTimeout((function(){e.loading=!1}),200)}))}}},l=r,c=a("4e82"),s=Object(c["a"])(l,n,o,!1,null,null,null);t["default"]=s.exports}}]);